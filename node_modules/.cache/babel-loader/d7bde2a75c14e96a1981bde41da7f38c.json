{"ast":null,"code":"var _jsxFileName = \"/Users/abhishekkumar/Desktop/firebase-blog-master/src/pages/Detail.js\",\n    _s = $RefreshSig$();\n\nimport { collection, doc, getDoc, getDocs, limit, query, serverTimestamp, Timestamp, updateDoc, orderBy, where } from \"firebase/firestore\";\nimport { isEmpty } from \"lodash\";\nimport React, { useState, useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\nimport CommentBox from \"../components/CommentBox\";\nimport Like from \"../components/Like\";\nimport FeatureBlogs from \"../components/FeatureBlogs\";\nimport RelatedBlog from \"../components/RelatedBlog\";\nimport Tags from \"../components/Tags\";\nimport UserComments from \"../components/UserComments\";\nimport { db } from \"../firebase\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Detail = _ref => {\n  _s();\n\n  let {\n    setActive,\n    user\n  } = _ref;\n  const userId = user === null || user === void 0 ? void 0 : user.uid;\n  const {\n    id\n  } = useParams(); // const [loading, setLoading] = useState(false);\n\n  const [blog, setBlog] = useState(null);\n  const [blogs, setBlogs] = useState([]);\n  const [tags, setTags] = useState([]);\n  const [comments, setComments] = useState([]);\n  let [likes, setLikes] = useState([]);\n  const [userComment, setUserComment] = useState(\"\");\n  const [relatedBlogs, setRelatedBlogs] = useState([]);\n  useEffect(() => {\n    const getRecentBlogs = async () => {\n      const blogRef = collection(db, \"blogs\");\n      const recentBlogs = query(blogRef, orderBy(\"timestamp\", \"desc\"), limit(5));\n      const docSnapshot = await getDocs(recentBlogs);\n      setBlogs(docSnapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      })));\n    };\n\n    getRecentBlogs();\n  }, []);\n  useEffect(() => {\n    id && getBlogDetail(); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [id]);\n\n  const getBlogDetail = async () => {\n    setLoading(true);\n    const blogRef = collection(db, \"blogs\");\n    const docRef = doc(db, \"blogs\", id);\n    const blogDetail = await getDoc(docRef);\n    const blogs = await getDocs(blogRef);\n    let tags = [];\n    blogs.docs.map(doc => tags.push(...doc.get(\"tags\")));\n    let uniqueTags = [...new Set(tags)];\n    setTags(uniqueTags);\n    setBlog(blogDetail.data());\n    const relatedBlogsQuery = query(blogRef, where(\"tags\", \"array-contains-any\", blogDetail.data().tags, limit(3)));\n    setComments(blogDetail.data().comments ? blogDetail.data().comments : []);\n    setLikes(blogDetail.data().likes ? blogDetail.data().likes : []);\n    const relatedBlogSnapshot = await getDocs(relatedBlogsQuery);\n    const relatedBlogs = [];\n    relatedBlogSnapshot.forEach(doc => {\n      relatedBlogs.push({\n        id: doc.id,\n        ...doc.data()\n      });\n    });\n    setRelatedBlogs(relatedBlogs);\n    setActive(null);\n    setLoading(false);\n  };\n\n  const handleComment = async e => {\n    e.preventDefault();\n    comments.push({\n      createdAt: Timestamp.fromDate(new Date()),\n      userId,\n      name: user === null || user === void 0 ? void 0 : user.displayName,\n      body: userComment\n    });\n    toast.success(\"Comment posted successfully\");\n    await updateDoc(doc(db, \"blogs\", id), { ...blog,\n      comments,\n      timestamp: serverTimestamp()\n    });\n    setComments(comments);\n    setUserComment(\"\");\n  };\n\n  const handleLike = async () => {\n    if (userId) {\n      if (blog !== null && blog !== void 0 && blog.likes) {\n        const index = likes.findIndex(id => id === userId);\n\n        if (index === -1) {\n          likes.push(userId);\n          setLikes([...new Set(likes)]);\n        } else {\n          likes = likes.filter(id => id !== userId);\n          setLikes(likes);\n        }\n      }\n\n      await updateDoc(doc(db, \"blogs\", id), { ...blog,\n        likes,\n        timestamp: serverTimestamp()\n      });\n    }\n  };\n\n  console.log(\"relatedBlogs\", relatedBlogs);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"single\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"blog-title-box\",\n      style: {\n        backgroundImage: `url('${blog === null || blog === void 0 ? void 0 : blog.imgUrl}')`\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"overlay\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"blog-title\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: blog === null || blog === void 0 ? void 0 : blog.timestamp.toDate().toDateString()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: blog === null || blog === void 0 ? void 0 : blog.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container-fluid pb-4 pt-4 padding blog-single-content\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container padding\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row mx-0\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-8\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"meta-info text-start\",\n              children: [\"By \", /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"author\",\n                children: blog === null || blog === void 0 ? void 0 : blog.author\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 141,\n                columnNumber: 20\n              }, this), \" -\\xA0\", blog === null || blog === void 0 ? void 0 : blog.timestamp.toDate().toDateString(), /*#__PURE__*/_jsxDEV(Like, {\n                handleLike: handleLike,\n                likes: likes,\n                userId: userId\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 143,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 140,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-start\",\n              children: blog === null || blog === void 0 ? void 0 : blog.description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 145,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-start\",\n              children: /*#__PURE__*/_jsxDEV(Tags, {\n                tags: blog === null || blog === void 0 ? void 0 : blog.tags\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 147,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 146,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 149,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"custombox\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"scroll\",\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  className: \"small-title\",\n                  children: [comments === null || comments === void 0 ? void 0 : comments.length, \" Comment\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 152,\n                  columnNumber: 19\n                }, this), isEmpty(comments) ? /*#__PURE__*/_jsxDEV(UserComments, {\n                  msg: \"No Comment yet posted on this blog. Be the first to comment\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 154,\n                  columnNumber: 21\n                }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: comments === null || comments === void 0 ? void 0 : comments.map(comment => /*#__PURE__*/_jsxDEV(UserComments, { ...comment\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 162,\n                    columnNumber: 25\n                  }, this))\n                }, void 0, false)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 151,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(CommentBox, {\n              userId: userId,\n              userComment: userComment,\n              setUserComment: setUserComment,\n              handleComment: handleComment\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"blog-heading text-start py-2 mb-4\",\n              children: \"Tags\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Tags, {\n              tags: tags\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 177,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(FeatureBlogs, {\n              title: \"Recent Blogs\",\n              blogs: blogs\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(RelatedBlog, {\n          id: id,\n          blogs: relatedBlogs\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 125,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Detail, \"tGJ3FKtKBSeP78i/2dZF/71KcI0=\", false, function () {\n  return [useParams];\n});\n\n_c = Detail;\nexport default Detail;\n\nvar _c;\n\n$RefreshReg$(_c, \"Detail\");","map":{"version":3,"names":["collection","doc","getDoc","getDocs","limit","query","serverTimestamp","Timestamp","updateDoc","orderBy","where","isEmpty","React","useState","useEffect","useParams","toast","CommentBox","Like","FeatureBlogs","RelatedBlog","Tags","UserComments","db","Detail","setActive","user","userId","uid","id","blog","setBlog","blogs","setBlogs","tags","setTags","comments","setComments","likes","setLikes","userComment","setUserComment","relatedBlogs","setRelatedBlogs","getRecentBlogs","blogRef","recentBlogs","docSnapshot","docs","map","data","getBlogDetail","setLoading","docRef","blogDetail","push","get","uniqueTags","Set","relatedBlogsQuery","relatedBlogSnapshot","forEach","handleComment","e","preventDefault","createdAt","fromDate","Date","name","displayName","body","success","timestamp","handleLike","index","findIndex","filter","console","log","backgroundImage","imgUrl","toDate","toDateString","title","author","description","length","comment"],"sources":["/Users/abhishekkumar/Desktop/firebase-blog-master/src/pages/Detail.js"],"sourcesContent":["import {\n  collection,\n  doc,\n  getDoc,\n  getDocs,\n  limit,\n  query,\n  serverTimestamp,\n  Timestamp,\n  updateDoc,\n  orderBy,\n  where,\n} from \"firebase/firestore\";\nimport { isEmpty } from \"lodash\";\nimport React, { useState, useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\nimport CommentBox from \"../components/CommentBox\";\nimport Like from \"../components/Like\";\nimport FeatureBlogs from \"../components/FeatureBlogs\";\nimport RelatedBlog from \"../components/RelatedBlog\";\nimport Tags from \"../components/Tags\";\nimport UserComments from \"../components/UserComments\";\nimport { db } from \"../firebase\";\n\nconst Detail = ({ setActive, user }) => {\n  const userId = user?.uid;\n  const { id } = useParams();\n  // const [loading, setLoading] = useState(false);\n  const [blog, setBlog] = useState(null);\n  const [blogs, setBlogs] = useState([]);\n  const [tags, setTags] = useState([]);\n  const [comments, setComments] = useState([]);\n  let [likes, setLikes] = useState([]);\n  const [userComment, setUserComment] = useState(\"\");\n  const [relatedBlogs, setRelatedBlogs] = useState([]);\n\n  useEffect(() => {\n    const getRecentBlogs = async () => {\n      const blogRef = collection(db, \"blogs\");\n      const recentBlogs = query(\n        blogRef,\n        orderBy(\"timestamp\", \"desc\"),\n        limit(5)\n      );\n      const docSnapshot = await getDocs(recentBlogs);\n      setBlogs(docSnapshot.docs.map((doc) => ({ id: doc.id, ...doc.data() })));\n    };\n\n    getRecentBlogs();\n  }, []);\n\n  useEffect(() => {\n    id && getBlogDetail();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [id]);\n\n  const getBlogDetail = async () => {\n    setLoading(true);\n    const blogRef = collection(db, \"blogs\");\n    const docRef = doc(db, \"blogs\", id);\n    const blogDetail = await getDoc(docRef);\n    const blogs = await getDocs(blogRef);\n    let tags = [];\n    blogs.docs.map((doc) => tags.push(...doc.get(\"tags\")));\n    let uniqueTags = [...new Set(tags)];\n    setTags(uniqueTags);\n    setBlog(blogDetail.data());\n    const relatedBlogsQuery = query(\n      blogRef,\n      where(\"tags\", \"array-contains-any\", blogDetail.data().tags, limit(3))\n    );\n    setComments(blogDetail.data().comments ? blogDetail.data().comments : []);\n    setLikes(blogDetail.data().likes ? blogDetail.data().likes : []);\n    const relatedBlogSnapshot = await getDocs(relatedBlogsQuery);\n    const relatedBlogs = [];\n    relatedBlogSnapshot.forEach((doc) => {\n      relatedBlogs.push({ id: doc.id, ...doc.data() });\n    });\n    setRelatedBlogs(relatedBlogs);\n    setActive(null);\n    setLoading(false);\n  };\n\n  const handleComment = async (e) => {\n    e.preventDefault();\n    comments.push({\n      createdAt: Timestamp.fromDate(new Date()),\n      userId,\n      name: user?.displayName,\n      body: userComment,\n    });\n    toast.success(\"Comment posted successfully\");\n    await updateDoc(doc(db, \"blogs\", id), {\n      ...blog,\n      comments,\n      timestamp: serverTimestamp(),\n    });\n    setComments(comments);\n    setUserComment(\"\");\n  };\n\n  const handleLike = async () => {\n    if (userId) {\n      if (blog?.likes) {\n        const index = likes.findIndex((id) => id === userId);\n        if (index === -1) {\n          likes.push(userId);\n          setLikes([...new Set(likes)]);\n        } else {\n          likes = likes.filter((id) => id !== userId);\n          setLikes(likes);\n        }\n      }\n      await updateDoc(doc(db, \"blogs\", id), {\n        ...blog,\n        likes,\n        timestamp: serverTimestamp(),\n      });\n    }\n  };\n\n  console.log(\"relatedBlogs\", relatedBlogs);\n  return (\n    <div className=\"single\">\n      <div\n        className=\"blog-title-box\"\n        style={{ backgroundImage: `url('${blog?.imgUrl}')` }}\n      >\n        <div className=\"overlay\"></div>\n        <div className=\"blog-title\">\n          <span>{blog?.timestamp.toDate().toDateString()}</span>\n          <h2>{blog?.title}</h2>\n        </div>\n      </div>\n      <div className=\"container-fluid pb-4 pt-4 padding blog-single-content\">\n        <div className=\"container padding\">\n          <div className=\"row mx-0\">\n            <div className=\"col-md-8\">\n              <span className=\"meta-info text-start\">\n                By <p className=\"author\">{blog?.author}</p> -&nbsp;\n                {blog?.timestamp.toDate().toDateString()}\n                <Like handleLike={handleLike} likes={likes} userId={userId} />\n              </span>\n              <p className=\"text-start\">{blog?.description}</p>\n              <div className=\"text-start\">\n                <Tags tags={blog?.tags} />\n              </div>\n              <br />\n              <div className=\"custombox\">\n                <div className=\"scroll\">\n                  <h4 className=\"small-title\">{comments?.length} Comment</h4>\n                  {isEmpty(comments) ? (\n                    <UserComments\n                      msg={\n                        \"No Comment yet posted on this blog. Be the first to comment\"\n                      }\n                    />\n                  ) : (\n                    <>\n                      {comments?.map((comment) => (\n                        <UserComments {...comment} />\n                      ))}\n                    </>\n                  )}\n                </div>\n              </div>\n              <CommentBox\n                userId={userId}\n                userComment={userComment}\n                setUserComment={setUserComment}\n                handleComment={handleComment}\n              />\n            </div>\n            <div className=\"col-md-3\">\n              <div className=\"blog-heading text-start py-2 mb-4\">Tags</div>\n              <Tags tags={tags} />\n              <FeatureBlogs title={\"Recent Blogs\"} blogs={blogs} />\n            </div>\n          </div>\n          <RelatedBlog id={id} blogs={relatedBlogs} />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Detail;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}